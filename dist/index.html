<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="apple-touch-icon" sizes="76x76" href="assets/img/apple-icon.png">
  <link rel="icon" type="image/png" href="assets/img/favicon.png">
  <title>MARStorage</title>
  <link href="https://fonts.googleapis.com/css?family=Poppins:200,300,400,600,700,800" rel="stylesheet" />
  <link href="https://use.fontawesome.com/releases/v5.0.6/css/all.css" rel="stylesheet">
  <link href="assets/css/style.min.css" rel="stylesheet" />
</head>

<body class="landing-page">
<nav class="navbar navbar-expand-lg fixed-top navbar-transparent " color-on-scroll="100">
  <div class="container">
    <div class="navbar-translate">
      <a class="navbar-brand" href="javascript:void(0);" rel="tooltip" title="Go to homepage" data-placement="bottom">
        <span>MARS</span>torage
      </a>
      <button class="navbar-toggler navbar-toggler" type="button" data-toggle="collapse" data-target="#navigation" aria-controls="navigation-index" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-bar bar1"></span>
        <span class="navbar-toggler-bar bar2"></span>
        <span class="navbar-toggler-bar bar3"></span>
      </button>
    </div>
    <div class="collapse navbar-collapse justify-content-end" id="navigation">
      <div class="navbar-collapse-header">
        <div class="row">
          <div class="col-6 collapse-brand">
            <a>
              MARStorage
            </a>
          </div>
          <div class="col-6 collapse-close text-right">
            <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navigation" aria-controls="navigation-index" aria-expanded="false" aria-label="Toggle navigation">
              <i class="tim-icons icon-simple-remove"></i>
            </button>
          </div>
        </div>
      </div>
      <ul class="navbar-nav">
        <li class="nav-item p-0">
          <a class="nav-link" href="javascript:login();">
            <p id="login">Login</p>
          </a>
        </li>
        <li class="nav-item p-0">
          <a class="nav-link" rel="tooltip" title="Follow us on Twitter" data-placement="bottom" href="javascript:void(0);">
            <i class="fab fa-twitter"></i>
            <p class="d-lg-none d-xl-none">Twitter</p>
          </a>
        </li>
        <li class="nav-item p-0">
          <a class="nav-link" rel="tooltip" title="Like us on Facebook" data-placement="bottom" href="javascript:void(0);">
            <i class="fab fa-facebook-square"></i>
            <p class="d-lg-none d-xl-none">Facebook</p>
          </a>
        </li>
        <li class="nav-item p-0">
          <a class="nav-link" rel="tooltip" title="Follow us on Instagram" data-placement="bottom" href="javascript:void(0);">
            <i class="fab fa-instagram"></i>
            <p class="d-lg-none d-xl-none">Instagram</p>
          </a>
        </li>
      </ul>
    </div>
  </div>
</nav>
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<nav class="navbar navbar-light bg-light navbar-expand-lg" style="background: linear-gradient(to left, #99ccff 0%, #ccffcc 100%); margin-top: 100px !important;">

<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarTogglerDemo02" aria-controls="navbarTogglerDemo02" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
</button>
<div class="collapse navbar-collapse" id="navbarTogglerDemo02">
<div class="navbar-nav float-rightd ml-auto">
        <li class="nav-item"><a class="nav-link mx-1" title="Upload files" href="javascript:getdata('','','upload')"><i class="fa fa-cloud-upload fa-fw" aria-hidden="true"></i> Upload Files</a></li>
</div>
</div>
</nav>
<form class="mt-3 mx-3" action="" method="post">
    <input type="hidden" name="p" value="">
    <input type="hidden" name="group" value="1">
        <div class="row">
            <div class="col-sm-3">
        <div class="file-tree-view border w-100" id="file-tree-view">
            <div  style="color: #fff;" class="tree-title"><i class="fa fa-align-left fa-fw"></i> Browse</div>
        </div>
            </div>
            <div class="col-sm-9 mt-3 mt-md-0">
                <div class="table-responsive">
    <table class="table" id="main-table"><thead><tr>
                <th style="width:3%">
                    <label>
                        <input type="checkbox" title="Invert selection" onclick="checkbox_toggle()">
                    </label>
                </th>
            <th>Name</th>
            <th style="width:10%">Size</th>
            <th style="width:12%">Modified</th>
            <th style="width:6.5%">Actions</th>
        </tr>
        </thead>

        <tbody id="name" style="border-top: 0.125rem solid #e3e3e3;"></tbody>

            <tr><td class="gray"></td><td class="gray" colspan="6">
                    Full size: <span title=""></span>,
                    files: ,
                    folders: 
                </td></tr>
    </table>
                </div>
            </div>
        </div>
        <div class="mb-5 row">
            <div class="col-sm-9 offset-sm-3"><a href="#/select-all" class="mt-2 mt-sm-0 btn2 btn btn-small btn-outline-primary" onclick="select_all();return false;"><i class="fa fa-check-square"></i> Select all</a> &nbsp;
            <a href="#/unselect-all" class="mt-2 mt-sm-0 btn2 btn btn-small btn-outline-primary" onclick="unselect_all();return false;"><i class="fa fa-window-close"></i> Unselect all</a> &nbsp;
            <a href="#/invert-all" class="mt-2 mt-sm-0 btn2 btn btn-small btn-outline-primary" onclick="invert_all();return false;"><i class="fa fa-th-list"></i> Invert selection</a> &nbsp;
            <input type="submit" class="hidden" name="delete" id="a-delete" value="Delete" onclick="return confirm('Delete selected files and folders?')">
            <a href="javascript:document.getElementById('a-delete').click();" class="mt-2 mt-sm-0 btn2 btn btn-small btn-outline-primary"><i class="fa fa-trash"></i> Delete </a> &nbsp;
            <input type="submit" class="hidden" name="copy" id="a-copy" value="Copy">
            <a href="javascript:document.getElementById('a-copy').click();" class="mt-2 mt-sm-0 btn2 btn btn-small btn-outline-primary"><i class="fa fa-files-o"></i> Copy </a>
            </div>
        </div>
</form>
  <a id="link" href=""></a>
</div>
<script src="main.js"></script>
<script>
var i;
var files = new Array();

var http_request = new XMLHttpRequest();
try{
    http_request = new XMLHttpRequest();
}catch (e) {
    try{
        http_request = new ActiveXObject("Msxml2.XMLHTTP");
    }catch (e) {
        try{
            http_request = new ActiveXObject("Microsoft.XMLHTTP");
        }catch (e) {
            alert("Your browser broke!");
        }	
    }
}
http_request.onreadystatechange = function() {
  if (http_request.readyState == 4) {
    var jsonObj = JSON.parse(http_request.responseText);
    for (i = 0; i < jsonObj.length; i++) {
      files[i] = {name: jsonObj[i].name, type: jsonObj[i].type, size: jsonObj[i].size, date: jsonObj[i].date, path: jsonObj[i].path, url: jsonObj[i].url, status: jsonObj[i].status};
    }
  }
}
http_request.open("GET", "data.json", true);
http_request.send();
function getdata(getname = "", getpath = "", getstatus = "") {
    var tbody = "";
    var tbodypart = "";
    if(getpath !== "") {
        tbody = `<tr><td></td><td colspan="6"><a href="javascript:getdata(${name}, ${path})"><i class="fa fa-chevron-circle-left"></i> ..</a></td></tr>`;
    }
    for (i = 0; i < files.length; i++) {
        var type = files[i]["type"];
        var size = files[i]["size"];
        var date = files[i]["date"];
        var path = files[i]["path"];
        var url = files[i]["url"];
        if(getstatus === "delete") {
          if(getname === name && getpath === path) {
            files[i]["status"] = "delete";
          }
        }
        if(getstatus === "rename") {
          if(getname === name && getpath === path) {
            var newname = prompt("New name");
            files[i]["name"] = newname;
          }
        }
        var status = files[i]["status"];
        var name = files[i]["name"];
        date = new Date(date * 1000);
        date = ('0' + date.getUTCDate()).slice(-2) +
            '.' + ('0' + (date.getUTCMonth()+1)).slice(-2) +
            '.' + ('0' + date.getUTCFullYear()).slice(-2) + 
            ' ' + ('0' + date.getUTCHours()).slice(-2) +
            ':' + ('0' + date.getUTCMinutes()).slice(-2);
        if(path === getpath && status === "") {
            if(type === "Folder") {
                tbodypart =
                `<tr>
                    <td>
                        <label>
                            <input type="checkbox" name="file[]" value="${name}">
                        </label>
                    </td>
                    <td>
                        <div class="filename">
                            <a href="javascript:getdata('${name}', '${name}')"><i class="fa fa-folder-o"></i> ${name}</a>
                        </div>
                    </td>
                    <td>${type}</td>
                    <td>${date}</td>
                    <td class="inline-actions">
                        <a title="Delete" href="javascript:getdata('${name}', '${path}', 'delete')" onclick="return confirm('Delete folder?');">
                            <i class="fa fa-trash-o" aria-hidden="true"></i>
                        </a>
                        <a title="Rename" href="javascript:getdata('${name}', '${path}', 'rename')">
                            <i class="fa fa-pencil-square-o" aria-hidden="true"></i>
                        </a>
                        <a title="Copy to..." href="?p=${path}&copy=${name}">
                            <i class="fa fa-files-o" aria-hidden="true"></i>
                        </a>
                        <a title="Direct link" href="${url}" target="_blank">
                            <i class="fa fa-link" aria-hidden="true"></i>
                        </a>
                    </td>
                </tr>`;
                tbody += tbodypart;
            }else{
                tbodypart =
                `<tr>
                    <td>
                        <label>
                            <input type="checkbox" name="file[]" value="${name}.${type}">
                        </label>
                    </td>
                    <td>
                        <div class="filename">
                            <a href="javascript:getdata(${name}, ${path})" title="File info"><i class="fa fa-file-text-o"></i> ${name}.${type}</a>
                        </div>
                    </td>
                    <td><span title="8 bytes">${size} B</span></td>
                    <td>${date}</td>
                    <td class="inline-actions">
                        <a title="Delete" href="javascript:getdata('${name}', '${path}', 'delete')" onclick="return confirm('Delete file?');">
                            <i class="fa fa-trash-o"></i>
                        </a>
                        <a title="Rename" href="javascript:getdata('${name}', '${path}', 'rename')">
                            <i class="fa fa-pencil-square-o"></i>
                        </a>
                        <a title="Copy to..." href="?p=${path}&copy=${name}.${type}">
                            <i class="fa fa-files-o"></i>
                        </a>
                        <a title="Direct link" href="https://marstorage.dev/${name}.${type}" target="_blank">
                            <i class="fa fa-link"></i>
                        </a>
                        <a title="Download" href="?p=${path}&dl=${name}.${type}">
                            <i class="fa fa-download"></i>
                        </a>
                    </td>
                </tr>`;
                tbody += tbodypart;
            }
        }
    }
    if (getstatus === "upload") {
      tbody = `<style>
        #hide input[type=file] {
            display:none;
            margin:10px;
        }
        #hide input[type=file] + label {
            display:inline-block;
            margin:20px;
            padding: 4px 32px;
            background-color: #FFFFFF;
            border:solid 1px #666F77;
            border-radius: 6px;
            color:#666F77;
        }
        #hide input[type=file]:active + label {
            background-image: none;
            background-color:#2D6C7A;
            color:#FFFFFF;
        }
      </style>
      <div class="container mt-3">
          <p><h4><b>Uploading files</b></h4></p>
          <p class="break-word">Destination folder:</p>
          <hr>
              <div class="p-2" style="background: white">
                <input type="file" id="file" multiple/><br>
              </div>
              <br>
              <p>
                  <a type="submit" class="btn btn-primary" href="javascript:submit('${path}')"><i class="fa fa-upload"></i> Upload</a> &nbsp;
                  <b><a href="?p=" class="text-secondary"><i class="fa fa-times-circle"></i> Cancel</a></b>
              </p>
      </div>`;
    }
    document.getElementById("name").innerHTML = tbody;
    if (getstatus === "") {
      console.log("Json loaded");
    }else if(getstatus === "upload"){
      console.log("File uploaded");
    }else if(getstatus === "delete"){
      console.log("File deleted");
    }else if(getstatus === "rename"){
      console.log("File renamed");
    }
    console.log(files);
}
function submit(path) {
  var all = document.getElementById("file");
  for (var i = 0; i < all.files.length; i++) {
    var file = all.files[i];
    window.createWebPage(file);
    var fileurl = document.getElementById('link').href;
    var filename = file["name"].split('.').slice(0, -1).join('.');
    var filetype = file["name"].split('.').pop();
    var length = files.length;
    files[length] = {name: filename, type: filetype, size: file["size"], date: Date.now(), path: path, url: fileurl, status: ""};
  }
  getdata(path, path);
}
window.onload = getdata;

  function change_checkboxes(e, t) {
      for (var n = e.length - 1; n >= 0; n--) e[n].checked = "boolean" == typeof t ? t : !e[n].checked
  }

  function get_checkboxes() {
      for (var e = document.getElementsByName("file[]"), t = [], n = e.length - 1; n >= 0; n--) (e[n].type = "checkbox") && t.push(e[n]);
      return t
  }

  function select_all() {
      change_checkboxes(get_checkboxes(), !0)
  }

  function unselect_all() {
      change_checkboxes(get_checkboxes(), !1)
  }

  function invert_all() {
      change_checkboxes(get_checkboxes())
  }

  function checkbox_toggle() {
      var e = get_checkboxes();
      e.push(this), change_checkboxes(e)
  }

  function login() {
    if (document.getElementById("login").innerHTML === "Login"){
      document.getElementById("login").innerHTML = "Logout";
    } else {
      document.getElementById("login").innerHTML = "Login";
    }
  }
</script>
</body>
</html>
<footer class="footer">
  <div class="container">
    <div class="row">
      <div class="col-md-3">
        <h1 class="title">MARStorage</h1>
      </div>
      <div class="col-md-3">
        <ul class="nav">
          <li class="nav-item">
            <a href="javascript:void(0);" class="nav-link">
              Home
            </a>
          </li>
          <li class="nav-item">
            <a href="javascript:void(0);" class="nav-link">
              Login
            </a>
          </li>
          <li class="nav-item">
            <a href="javascript:void(0);" class="nav-link">
              Register
            </a>
          </li>
        </ul>
      </div>
      <div class="col-md-3">
        <ul class="nav">
          <li class="nav-item">
            <a href="javascript:void(0);" class="nav-link">
              Contact Us
            </a>
          </li>
          <li class="nav-item">
            <a href="javascript:void(0);" class="nav-link">
              About Us
            </a>
          </li>
          <li class="nav-item">
            <a href="javascript:void(0);" class="nav-link">
              Blog
            </a>
          </li>
        </ul>
      </div>
      <div class="col-md-3">
        <h3 class="title">Follow us:</h3>
        <div class="btn-wrapper profile">
          <a href="javascript:void(0);" class="btn btn-icon btn-neutral btn-round btn-simple" data-toggle="tooltip" data-original-title="Follow us">
            <i class="fab fa-twitter"></i>
          </a>
          <a href="javascript:void(0);" class="btn btn-icon btn-neutral btn-round btn-simple" data-toggle="tooltip" data-original-title="Like us">
            <i class="fab fa-facebook-square"></i>
          </a>
          <a href="javascript:void(0);" class="btn btn-icon btn-neutral  btn-round btn-simple" data-toggle="tooltip" data-original-title="Follow us">
            <i class="fab fa-dribbble"></i>
          </a>
        </div>
      </div>
    </div>
  </div>
</footer>
</div>
  <!--   Core JS Files   -->
  <script src="assets/js/core/jquery.min.js" type="text/javascript"></script>
  <script src="assets/js/core/popper.min.js" type="text/javascript"></script>
  <script src="assets/js/core/bootstrap.min.js" type="text/javascript"></script>
  <!-- Control Center for Black UI Kit: parallax effects, scripts for the example pages etc -->
  <script src="assets/js/script.min.js" type="text/javascript"></script>
</body>

</html>